<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>Spring Ajax - Test Case</h1>
<ul>
    <li>Spring boot</li>
    <li>Spring </li>
    <li>com.......</li>
</ul>

<p><button onclick="ajaxList();">ajaxList[GET]</button> </p>
<p><button onclick="ajaxListModel();">ajaxListModel[GET, @ModelAttribute]</button></p>
<p><button onclick="ajaxListNobody();">ajaxListNobody[GET, Not @ResponseBody]</button> <small>@ResponseBody가 없으므로 뷰 리졸버를 찾게됨</small></p>


<p></p>
<p></p>

<div>
    <h3>Response -- </h3>
    <div id="response-panel"></div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>
let _response = $('#response-panel');

function ajaxList(){
    let dataSet = new Object();
    dataSet.ram = "ram";
    dataSet.ramPass = "ramPass";
    $.ajax({
        type    : 'GET', // method
        url     : 'list',
        //url       : 'list?username=ram&password=ramPass',
        // GET 요청은 데이터가 URL 파라미터로 포함되어 전송됩니다.
        async   : 'true',   // default = true
        data    : dataSet,  // GET 요청은 지원되지 않습니다.
        processData : true, // GET 요청은 데이터가 바디에 포함되는 것이 아니기 때문 URL에 파라미터 형식으로 추가 해서 전송
        contentType : 'application/json',  // List 컨트롤는 application/json 형식으로만 처리하기 때문에 컨텐트 타입을 지정
        //dataType  : [응답 데이터 형식], // 명시하지 않을 경우 자동으로 추측
        success : function(data, status, xhr){
            responseJson(data);
            _response.html(JSON.stringify(data));
        },
        error   : function(error){
            console.log("error", error);

            responseError(error);
        }
    });
}

// Test 2
function ajaxListModel(){
    var dataSet = new Object();
    dataSet.username = "ram";
    dataSet.password = "ramPass";
    $.ajax({
        type    : 'GET', // method
        url     : 'list_model',
        //url       : 'list?username=kdevkr&password=kdevpass', // GET 요청은 데이터가 URL 파라미터로 포함되어 전송됩니다.
        async   : 'true', // true
        data    : dataSet, // GET 요청은 지원되지 않습니다.
        processData : true, // GET 요청은 데이터가 바디에 포함되는 것이 아니기 때문에 URL에 파라미터 형식으로 추가해서 전송해줍니다.
        contentType : 'application/json', // List 컨트롤러는 application/json 형식으로만 처리하기 때문에 컨텐트 타입을 지정해야 합니다.
        //dataType  : [응답 데이터 형식], // 명시하지 않을 경우 자동으로 추측
        success : function(data, status, xhr){
            _response.html(JSON.stringify(data));
        },
        error   : function(error){
            console.log("error", error);
            responseError(error);
        }
    });
}

// Test3
    function ajaxListNobody(){
        var dataSet = new Object();
        dataSet.username = "kdevkr";
        dataSet.password = "kdevpass";
        $.ajax({
            type    : 'GET', // method
            url     : 'list_nobody',
            //url       : 'list_nobody?username=kdevkr&password=kdevpass', // GET 요청은 데이터가 URL 파라미터로 포함되어 전송됩니다.
            async   : 'true', // true
            data    : dataSet, // GET 요청은 지원되지 않습니다.
            processData : true, // GET 요청은 데이터가 바디에 포함되는 것이 아니기 때문에 URL에 파라미터 형식으로 추가해서 전송해줍니다.
            contentType : 'application/json', // List 컨트롤러는 application/json 형식으로만 처리하기 때문에 컨텐트 타입을 지정해야 합니다.
            //dataType  : [응답 데이터 형식], // 명시하지 않을 경우 자동으로 추측
            success : function(data, status, xhr){
                _response.html(JSON.stringify(data));
            },
            error   : function(error){
                console.log("error", error);
                responseError(error);
            }
        });
    }


/*function ajaxListModel(){
    let dataSet = new Object();
    dataSet.username = "ram";
    dataSet.password = "ramPass";
    console.log(dataSet);
    $.ajax({
        type    : 'GET', // 메서드
        url     :'list_model',
        //url       : 'list?ram=ram&password=kdevpass',
        // GET 요청은 데이터가 URL 파라미터로 포함되어 전송됩니다.
        async       : 'true',
        data       : dataSet,  // GET요청은 지원되지 않는다?
        processData : true,  // GET 요청은 데이터가 바디에 포함되지 않고 URL 파라미터 형태로 보내줌
        contentType : 'application/json',  // 디폴트. 생략 가능
        //dataType : [응답 데이터 형식], // 명시하지 않을 경우 자동으로 추측
        success : function(data, status, xhr){
            _response.html(JSON.stringify(data));
        },
        error   : function (error){
            console.log("error", error)
            responseError(error);
        }
    });
}*/

function convertJson(data){
    return JSON.stringify(data, true, 2);
}

function responseJson(data){
    _response.html(convertJson(data));
}

function responseError(data){
    _response.html(data.responseText);
}






</script>

</body>
</html>